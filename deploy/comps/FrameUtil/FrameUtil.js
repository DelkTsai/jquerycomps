(function(b,a){b(["JC.common"],function(){var d=$(document),c=$(window),e;JC.FrameUtil=e={eventHost:{},heightOffset:0,autoUpdateSizeMs:1000,childSizePattern:1,isChildAutoClose:true,isChildAutoSize:true,id:function(){return e._id},noticeSize:function(f){f=e.type(f);if(!e.parent()){return e}var g={type:f};e.parent().jEventHost.trigger("size",[e.info(g)]);return e},autoNoticeSize:function(g,f){typeof g=="undefined"&&(g=e.autoUpdateSizeMs);$(e).data("FUI_noticeSize")&&clearInterval($(e).data("FUI_noticeSize"));e.noticeSize(f);g&&$(e).data("FUI_noticeSize",setInterval(function(){e.noticeSize(f)},g));return e},subscribeEvent:function(f,g){if(!f){return e}$(e.eventHost).on(f,g);return e},noticeData:function(g,f){if(!(g)){return e}if(!e.parent()){return e}f=e.type(f);e.parent().jEventHost.trigger("data",e.info({data:g,type:f}));return e},noticeClose:function(f){f=e.type(f);e.parent().jEventHost.trigger("close",e.info({type:f}));return e},info:function(f){var h=$(document.body),g={"$":$,width:document.documentElement.offsetWidth,height:document.documentElement.offsetHeight,bodyWidth:h.width(),bodyHeight:h.height(),id:e.id()};f&&(g=JC.f.extendObject(g,f));return g},parent:function(){var f;if(window.parent&&window.parent!=window&&window.parent.$&&window.parent.JC&&window.parent.JC.FrameUtil){f={"$":window.parent.$,win:window.parent,jwin:window.parent.$(window.parent),JC:window.parent.JC,FrameUtil:window.parent.JC.FrameUtil,eventHost:window.parent.JC.FrameUtil.eventHost,jEventHost:window.parent.$(window.parent.JC.FrameUtil.eventHost),id:window.parent.JC.FrameUtil.id()}}return f},frameInfo:function(g,j){g&&(g=$(g));var k=null;if(g&&g.length){var i=g.prop("contentWindow"),h=g.prop("contentDocument"),f=JC.f.getUrlParam(g.attr("src")||"","jsAction")||i.name||"";k={"$":i.$,width:h.documentElement.offsetWidth,height:h.documentElement.offsetHeight,bodyWidth:0,bodyHeight:0,win:i,doc:h,type:f,id:""};h.body&&(k.bodyWidth=h.body.offsetWidth,k.bodyHeight=h.body.offsetHeight);if(i.JC&&i.JC.FrameUtil){k.id=i.JC.FrameUtil.id()}j&&(k=JC.f.extendObject(k,j))}return k},type:function(f,h,g){if(!f){g&&(g=$(g));if(g&&g.length){f=JC.f.getUrlParam(g.attr("jsAction")||"","jsAction");f=f||g.prop("contentWindow").name||""}else{f=JC.f.getUrlParam("jsAction");f=f||window.name||""}}f&&h&&(f+=h);return f},updateChildrenSize:function(f){f&&(f=$(f));if(!(f&&f.length)){return e}f.each(function(){e.updateChildSize($(this))});return e},updateChildSize:function(f){f&&(f=$(f));if(!(f&&f.length)){return e}if(!f.is(":visible")){return e}var h,g;h=e.frameInfo(f);if(!h.height){return e}f.css(e.cssFromSizePattern(e.childSizePattern,h));return e},childrenAutoSize:function(g,h){g&&(g=$(g));if(!(g&&g.length)){return e}typeof h=="undefined"&&(h=e.autoUpdateSizeMs);var f={frames:g};e.updateChildrenSize(g);g.data("FUI_autoSize")&&clearInterval(g.data("FUI_autoSize"));h&&g.data("FUI_autoSize",setInterval(function(){e.updateChildrenSize(g)},h));return e},childIdMap:function(f){var g;if(f){if(f in e._childIdMap){g=e._childIdMap[f]}else{$("iframe").each(function(h){var j=$(this),i=j.prop("contentWindow");if(i&&i.JC&&i.JC.FrameUtil&&i.JC.FrameUtil.id()){if(i.JC.FrameUtil.id()===f){e._childIdMap[f]=g=j;return false}}})}}return g},_childIdMap:{},cssFromSizePattern:function(g,f){var h={};switch(g){case 1:h.height=f.height+e.heightOffset;break;case 2:h.width=f.width;break;default:h.height=f.height+e.heightOffset;h.width=f.width;break}return h}};e._id=location.href+"_"+new Date().getTime();JC.f.safeTimeout(function(){if(e.isChildAutoSize){JC.FrameUtil.subscribeEvent("size",function(g,f){if(!f.height){return}var h=e.childIdMap(f.id),i;if(h&&h.length){h.css(e.cssFromSizePattern(e.childSizePattern,f))}})}if(e.isChildAutoClose){JC.FrameUtil.subscribeEvent("close",function(g,f){var h=e.childIdMap(f.id),i,j;if(h&&h.length){j=JC.f.parentSelector(h,"div.UPanel");j&&j.length&&JC.Panel.getInstance(j)&&JC.Panel.getInstance(j).close()}})}},null,"JCFrameUtilInit",200);return JC.FrameUtil})}(typeof define==="function"&&define.amd?define:function(b,a,c){typeof b=="function"&&(c=b);typeof a=="function"&&(c=a);c&&c()},window));