(function(b,a){b(["JC.common"],function(){window.Panel=JC.Panel=g;function g(k,m,n,l){typeof k=="string"&&(k=k.trim().replace(/[\r\n]+/g,""));typeof m=="string"&&(m=m.trim().replace(/[\r\n]+/g,""));typeof n=="string"&&(n=n.trim().replace(/[\r\n]+/g,""));if(g.getInstance(k)){return g.getInstance(k)}this._model=new j(k,m,n,l);this._view=new i(this._model);this._init()}g.getInstance=function(k){if(typeof k=="string"&&!/</.test(k)){k=$(k)}if(k&&typeof k=="string"){return}return $(k).data("PanelInstace")};g.focusButton=true;g.clickClose=true;g.autoCloseMs=2000;g._fixWidth=function(p,o,m,n){var l=$('<div class="UPanel_TMP" style="position:absolute; left:-9999px;top:-9999px;">'+p+"</div>").appendTo("body"),k=l.width()+80;l.remove();m=m||200;n=n||500;k>n&&(k=n);k<m&&(k=m);o.selector().css("width",k)};g._getButton=function(k){var l=[];if(k){l.push('<div style="text-align:center" class="UButton"> ');if(k>=1){l.push('<button type="button" eventtype="confirm">确定</button>')}if(k>=2){l.push('<button type="button" eventtype="cancel">取消</button>')}l.push("</div>")}return l.join("")};g.prototype={_init:function(){var k=this;k._view.getPanel().data("PanelInstace",k);k._model.addEvent("close_default",function(l,m){m._view.close()});k._model.addEvent("show_default",function(l,m){m._view.show()});k._model.addEvent("hide_default",function(l,m){m._view.hide()});k._model.addEvent("confirm_default",function(l,m){m.trigger("close")});k._model.addEvent("cancel_default",function(l,m){m.trigger("close")});k._model.panelautoclose()&&k.autoClose();return k},on:function(l,k){l&&k&&this._model.addEvent(l,k);return this},show:function(l,m){var k=this;setTimeout(function(){switch(typeof l){case"number":switch(l){case 0:k.center();break}break;case"object":l=$(l);l.length&&k._view.positionWith(l,m);if(!k._model.bindedPositionWithEvent){k._model.bindedPositionWithEvent=true;var n=function(){if(!k._view.getPanel().is(":visible")){return}k.positionWith(l,m)};$(window).off("resize",n);$(window).on("resize",n);k.on("close",function(){k._model.bindedPositionWithEvent=false;$(window).off("resize",n)})}break}},10);this.trigger("beforeshow",this._view.getPanel());this.trigger("show",this._view.getPanel());return this},positionWith:function(l,k){l=$(l);l&&l.length&&this._view.positionWith(l,k);return this},hide:function(){this.trigger("beforehide",this._view.getPanel());this.trigger("hide",this._view.getPanel());return this},close:function(){this.trigger("beforeclose",this._view.getPanel());this.trigger("close",this._view.getPanel());return this},isClickClose:function(){return this._model.panelclickclose()},clickClose:function(k){k&&this.layout()&&this.layout().removeAttr("panelclickclose");!k&&this.layout()&&this.layout().attr("panelclickclose",true);return this},addAutoClose:function(){this.clickClose.apply(this,JC.f.sliceArgs(arguments));return this},autoClose:function(l,n){if(typeof l=="number"){n=l;l=null}var k=this,m;n=k._model.panelautoclosems(n);g._autoCloseTimeout&&clearTimeout(g._autoCloseTimeout);k.on("close",function(){g._autoCloseTimeout&&clearTimeout(g._autoCloseTimeout)});g._autoCloseTimeout=setTimeout(function(){l&&k.on("close",l);k.close()},n);return this},focusButton:function(){this._view.focusButton();return this},dispose:function(){this._view.close();return this},center:function(){this.trigger("beforecenter",this._view.getPanel());this._view.center();this.trigger("center",this._view.getPanel());return this},selector:function(){return this._view.getPanel()},layout:function(){return this._view.getPanel()},find:function(k){return this.layout().find(k)},trigger:function(m,p){var k=this,o=this._model.getEvent(m),l=true;if(o&&o.length){p&&(p=$(p))&&p.length&&(p=p[0]);$.each(o,function(r,q){if(q.call(p,m,k)===false){return l=false}})}if(l){var n=this._model.getEvent(m+"_default");if(n&&n.length){$.each(n,function(r,q){if(q.call(p,m,k)===false){return false}})}}return this},header:function(l){if(typeof l!="undefined"){this._view.getHeader(l)}var k=this._view.getHeader();if(k&&k.length){l=k.html()}return l||""},body:function(l){if(typeof l!="undefined"){this._view.getBody(l)}var k=this._view.getBody();if(k&&k.length){l=k.html()}return l||""},footer:function(l){if(typeof l!="undefined"){this._view.getFooter(l)}var k=this._view.getFooter();if(k&&k.length){l=k.html()}return l||""},panel:function(l){if(typeof l!="undefined"){this._view.getPanel(l)}var k=this._view.getPanel();if(k&&k.length){l=k.html()}return l||""},triggerSelector:function(k){return this._model.triggerSelector(k)},offsetTop:function(k){return this._model.offsetTop(k)},offsetLeft:function(k){return this._model.offsetLeft(k)}};function j(k,m,n,l){this.selector=k;this.headers=m;this.bodys=n;this.footers=l;this.panel;this._events={};this._init()}j.prototype={_init:function(){var k=this,l=typeof this.selector!="undefined"?$(this.selector):undefined;g.ignoreClick=true;if(l&&l.length){this.selector=l;if(!this.selector.parent().length){k.selector.appendTo($(document.body));window.JC.f.jcAutoInitComps&&JC.f.jcAutoInitComps(k.selector)}}else{if(!l||l.length===0){this.footers=this.bodys;this.bodys=this.headers;this.headers=this.selector;this.selector=undefined}}setTimeout(function(){g.ignoreClick=false},1);return this},offsetTop:function(k){typeof k!="undefined"&&(this._offsetTop=k);return this._offsetTop||0},offsetLeft:function(k){typeof k!="undefined"&&(this._offsetLeft=k);return this._offsetLeft||0},triggerSelector:function(k){typeof k!="undefined"&&(this._triggerSelector=k);return this._triggerSelector},addEvent:function(l,k){if(!(l&&k)){return}l&&(l=l.toLowerCase());if(!(l in this._events)){this._events[l]=[]}if(/\_default/i.test(l)){this._events[l].unshift(k)}else{this._events[l].push(k)}},getEvent:function(k){return this._events[k]},panelfocusbutton:function(){var k=g.focusButton;if(this.panel.is("[panelfocusbutton]")){k=JC.f.parseBool(this.panel.attr("panelfocusbutton"))}return k},panelclickclose:function(){var k=g.clickClose;if(this.panel.is("[panelclickclose]")){k=JC.f.parseBool(this.panel.attr("panelclickclose"))}return k},panelautoclose:function(){var k;if(this.panel.is("[panelautoclose]")){k=JC.f.parseBool(this.panel.attr("panelautoclose"))}return k},panelautoclosems:function(k){var l=g.autoCloseMs;if(this.panel.is("[panelautoclosems]")){l=parseInt(this.panel.attr("panelautoclosems"),10)}typeof k=="number"&&(l=k);return l}};function i(k){this._model=k;this._tpl=c;this._init()}i.prototype={_init:function(){if(!this._model.panel){if(this._model.selector){this._model.panel=this._model.selector}else{this._model.panel=$(this._tpl);this._model.panel.appendTo(document.body);window.JC.f.jcAutoInitComps&&JC.f.jcAutoInitComps(this._model.panel)}}this.getHeader();this.getBody();this.getFooter();return this},positionWith:function(m,q){if(!(m&&m.length)){return}this.getPanel().css({left:"-9999px",top:"-9999px",display:"block",position:"absolute"});var y=m.offset(),z=m.prop("offsetWidth"),o=m.prop("offsetHeight");var v=this.getPanel().prop("offsetWidth"),s=this.getPanel().prop("offsetHeight");var l=$(window).width(),n=$(window).height();var r=$(document).scrollTop(),p=$(document).scrollLeft();var u=y.left+p,t=y.top+o+1;if(typeof q!="undefined"){switch(q){case"top":t=y.top-s-1;u=y.left+z/2-v/2;break}}t+=this._model.offsetTop();u+=this._model.offsetLeft();var w=r+n-s,A=r;if(t>w){t=y.top-s-1}if(t<A){t=r}var x=p+l-v,k=p;if(u>x){u=p+l-v-1}if(u<k){u=p}this.getPanel().css({left:u+"px",top:t+"px"})},show:function(){this.getPanel().css({"z-index":ZINDEX_COUNT++}).show()},focusButton:function(){if(!this._model.panelfocusbutton()){return}var k=this.getPanel().find("input[eventtype=confirm], input[type=submit], button[eventtype=confirm], button[type=submit]");!k.length&&(k=this.getPanel().find("input[eventtype=cancel], input[type=buton], button[eventtype=cancel], button[type=button]"));k.length&&$(k[0]).focus()},hide:function(){this.getPanel().hide()},close:function(){this.getPanel().remove()},getPanel:function(k){if(typeof k!="undefined"){this.getPanel().html(k)}return this._model.panel},getHeader:function(k){var l=this.getPanel().find("div.UPContent > div.hd");if(typeof k!="undefined"){this._model.headers=k}if(typeof this._model.headers!="undefined"){if(!l.length){this.getPanel().find("div.UPContent > div.bd").before(l=$('<div class="hd">弹出框</div>'))}l.html(this._model.headers);this._model.headers=undefined}return l},getBody:function(k){var l=this.getPanel().find("div.UPContent > div.bd");if(typeof k!="undefined"){this._model.bodys=k}if(typeof this._model.bodys!="undefined"){l.html(this._model.bodys);this._model.bodys=undefined}return l},getFooter:function(k){var l=this.getPanel().find("div.UPContent > div.ft");if(typeof k!="undefined"){this._model.footers=k}if(typeof this._model.footers!="undefined"){if(!l.length){this.getPanel().find("div.UPContent > div.bd").after(l=$('<div class="ft" ></div>'))}l.html(this._model.footers);this._model.footers=undefined}return l},center:function(){var o=this.getPanel(),x=o.width(),l=o.height(),y,w,q=$(window).width(),t=$(window).height(),n=$(document).scrollLeft(),m=$(document).scrollTop(),v;if(window.parent&&window.parent!=window){try{var k=window.parent,A=k.window.$,s=k.window,p=k.document,u=A(s),r=A(p);window.PANEL_WIN_ID="frame"+JC.f.ts();r.find("iframe").each(function(){var C=A(this),F=C.attr("src"),D=JC.f.relativePath(F,s.location.href).trim(),E=(location.href+"").trim();if(E.indexOf(D)>-1&&C.prop("contentWindow").PANEL_WIN_ID==window.PANEL_WIN_ID){v=C;return false}});if(v&&v.length){var B=d(f(v,A),e(u,r,A));q=B.width;t=B.height;m=B.rect.height-t;if(m>(B.viewport.maxY)){m=B.viewport.y+B.rect.y}}}catch(z){}}o.css({left:"-9999px",top:"-9999px"}).show();y=(q-x)/2+n;w=(t-l)/2+m;if((t-l-100)>300){w-=100}if((w+l-m)>t){w=m+t-l}if(w<m||w<0){w=m}w+=this._model.offsetTop();y+=this._model.offsetLeft();o.css({left:y+"px",top:w+"px"})}};var c=['<div class="UPanel" style="width: 600px;">','    <div class="UPContent">','        <div class="bd"></div>','        <span class="close" eventtype="close"></span>',"    </div><!--end UPContent-->","</div>"].join("");JC.hideAllPanel=function(k){$("div.UPanel").each(function(){var l=$(this),m=g.getInstance(l);if(!m){return}m.hide();k&&m.close()})};JC.hideAllPopup=function(k){$("body > div.UPanelPopup_identifer").each(function(){var l=$(this),m=g.getInstance(l);if(!m){return}m.hide();k&&m.close()})};$(document).delegate("div.UPanel","click",function(k){var m=$(this),n=$(k.target||k.srcElement),l;if(n&&n.length&&n.is("[eventtype]")){l=n.attr("eventtype");l&&m.data("PanelInstace")&&m.data("PanelInstace").trigger(l,n,k)}});$(document).delegate("div.UPanel","click",function(l){var k=$(this),m=g.getInstance(k);if(m&&m.isClickClose()){l.stopPropagation()}});$(document).on("click",function(k){if(g.ignoreClick){return}$("div.UPanel").each(function(){var l=$(this),m=g.getInstance(l);if(m&&m.isClickClose()&&m.layout()&&m.layout().is(":visible")){m.hide();m.close()}})});$(document).on("keyup",function(k){var l=k.keyCode;switch(l){case 27:JC.hideAllPanel(1);break}});var h={alert:null,confirm:null,msgbox:null,"dialog.alert":null,"dialog.confirm":null,"dialog.msgbox":null,panel:null,dialog:null};function d(m,n){!n&&(n=e());var o={width:0,height:0},l=0,k=0;if(m.y<n.y&&m.maxY>n.maxY){o.height=n.height}else{if(m.y<n.y&&m.maxY<n.maxY){o.height=n.height-(n.maxY-m.maxY)}else{if(m.y>n.y&&m.maxY>n.maxY){o.height=n.maxY-m.y}else{if(m.y>n.y&&m.maxY<n.maxY){o.height=m.height}}}}if(m.x<n.x&&m.maxX>n.maxX){o.width=n.width}else{if(m.x<n.x&&m.maxX<n.maxX){o.width=n.width-(n.maxX-m.maxX)}else{if(m.x>n.x&&m.maxX>n.maxX){o.width=n.maxX-m.x}else{if(m.x>n.x&&m.maxX<n.maxX){o.width=m.width}}}}o.realWidth=o.width;o.realHeight=o.height;o.width<0&&(o.width=0);o.height<0&&(o.height=0);o.rect=m;o.viewport=n;return o}function f(k,n){n=n||window.$;k=n(k);var l=k.offset(),m=k.prop("offsetWidth"),o=k.prop("offsetHeight");return{x:l.left,y:l.top,width:m,height:o,maxX:l.left+m,maxY:l.top+o}}function e(n,m,k){k=k||window.$;n=k(n||window);m=k(m||document);var l={width:n.width(),height:n.height(),scrollTop:m.scrollTop(),scrollLeft:m.scrollLeft()};l.x=l.scrollLeft;l.y=l.scrollTop;l.maxX=l.x+l.width;l.maxY=l.y+l.height;return l}$(document).on("click",function(l){var m=$(l.target||l.srcElement),z=m.attr("paneltype"),t=m.attr("panelmsg"),v=m.is("[panelmsgbox]")?JC.f.parentSelector(m,m.attr("panelmsgbox")):null;if(!(z&&(t||(v&&v.length)))){return}z=z.toLowerCase();if(!z in h){return}m.prop("nodeName")&&m.prop("nodeName").toLowerCase()=="a"&&l.preventDefault();var q,k=(parseInt(m.attr("panelstatus"),10)||0),A=m.attr("panelcallback"),x=m.attr("panelcancelcallback"),y=m.attr("panelclosecallback"),o=parseInt(m.attr("panelbutton"),10)||0,n=m.attr("panelheader")||"",p=m.is("[panelheaderbox]")?JC.f.parentSelector(m,m.attr("panelheaderbox")):null,s=m.attr("panelfooter")||"",w=m.is("[panelfooterbox]")?JC.f.parentSelector(m,m.attr("panelfooterbox")):null,r=m.is("[panelhideclose]")?JC.f.parseBool(m.attr("panelhideclose")):false;v&&(t=JC.f.scriptContent(v)||t);p&&p.length&&(n=JC.f.scriptContent(p)||s);w&&w.length&&(s=JC.f.scriptContent(w)||s);m.prop("nodeName")&&m.prop("nodeName").toLowerCase()=="a"&&l.preventDefault();A&&(A=window[A]);y&&(y=window[y]);switch(z){case"alert":JC.alert&&(q=JC.alert(t,m,k));break;case"confirm":JC.confirm&&(q=JC.confirm(t,m,k));break;case"msgbox":JC.msgbox&&(q=JC.msgbox(t,m,k));break;case"dialog.alert":JC.Dialog&&JC.Dialog.alert&&(q=JC.Dialog.alert(t,k));break;case"dialog.confirm":JC.Dialog&&JC.Dialog.confirm&&(q=JC.Dialog.confirm(t,k));break;case"dialog.msgbox":JC.Dialog&&JC.Dialog.msgbox&&(q=JC.Dialog.msgbox(t,k));break;case"panel":case"dialog":var u="";if(z=="panel"){q=new g(n,t+g._getButton(o),s)}else{if(!JC.Dialog){return}q=JC.Dialog(n,t+g._getButton(o),s)}q.on("beforeshow",function(B,C){!n&&C.find("div.hd").hide();!n&&C.find("div.ft").hide();g._fixWidth(t,q);r&&C.find("span.close").hide()});z=="panel"&&q.show(m,"top");break}if(!q){return}if(/msgbox/i.test(z)){A&&q.on("close",A)}else{A&&q.on("confirm",A)}y&&q.on("close",y);x&&q.on("cancel",x);q.triggerSelector(m)});return JC.Panel})}(typeof define==="function"&&define.amd?define:function(b,a,c){typeof b=="function"&&(c=b);typeof a=="function"&&(c=a);c&&c()},window));(function(b,a){b(["JC.Panel.default"],function(){JC.msgbox=function(i,h,g,f,e){if(typeof h=="number"){g=h;h=null}if(typeof f=="number"){e=f;f=null}var d=c.popup(JC.msgbox.tpl||c.tpls.msgbox,i,h,g);f&&d.on("close",f);setTimeout(function(){d.autoClose(e)},1);return d};JC.msgbox.tpl;JC.alert=function(g,f,e,d){if(typeof f=="number"){e=f;f=null}return c.popup(JC.alert.tpl||c.tpls.alert,g,f,e,d)};JC.alert.tpl;JC.confirm=function(i,h,g,f,d){if(typeof h=="number"){g=h;h=null}var e=c.popup(JC.confirm.tpl||c.tpls.confirm,i,h,g,f);e&&d&&e.on("cancel",d);return e};JC.confirm.tpl;var c={minWidth:180,maxWidth:500,xoffset:9,yoffset:3,popupIdentifier:function(e){var d;if(!e){$("body > div.UPanelPopup_identifer").each(function(){var f=$(this),g=Panel.getInstance(f);if(!g){return}g.hide();g.close()});$("body > div.UPanel_TMP").remove()}else{e.selector().addClass("UPanelPopup_identifer");e.selector().data("PopupInstance",e)}},popup:function(e,i,h,g,f){if(!i){return}c.popupIdentifier();h&&(h=$(h));var e=e.replace(/\{msg\}/g,i).replace(/\{status\}/g,c.getStatusClass(g||""));var d=new JC.Panel(e);c.popupIdentifier(d);d.selector().data("popupSrc",h);c.fixWidth(i,d);f&&d.on("confirm",f);if(!h){d.center()}d.on("show_default",function(){if(h&&h.length){c.showEffect(d,h,function(){d.focusButton()});return false}});d.on("close_default",function(){if(h&&h.length){c.hideEffect(d,h,function(){d.selector().remove();d=null})}else{d.selector().remove()}return false});d.on("hide_default",function(){if(h&&h.length){c.hideEffect(d,h,function(){d.selector().hide()});return false}else{d.selector().hide()}});if(h&&h.length){d.selector().css({left:"-9999px",top:"-9999px"})}d.selector().css("z-index",window.ZINDEX_COUNT++);d.show();return d},hideEffect:function(e,g,f){g&&(g=$(g));if(!(g&&g.length)){f&&f(e);return}if(!(e&&e.selector)){return}var m=g.offset(),h=e.selector();var j=h[0];j.interval&&clearInterval(j.interval);j.defaultWidth&&h.width(j.defaultWidth);j.defaultHeight&&h.height(j.defaultHeight);var i=g.width(),d=h.height();j.defaultWidth=h.width();j.defaultHeight=h.height();var l=c.getLeft(m.left,i,h.width());var k=c.getTop(m.top,g.height(),d);k=k-d-c.yoffset;h.height(0);h.css({left:l+"px"});j.interval=JC.f.easyEffect(function(n,o){h.css({top:k+n+"px",height:d-n+"px"});if(g&&!g.is(":visible")){clearInterval(j.interval);f&&f(e)}if(d===n){h.hide()}o&&f&&f(e)},d)},showEffect:function(e,g,f){g&&(g=$(g));if(!(g&&g.length)){return}if(!(e&&e.selector)){return}var m=g.offset(),h=e.selector();var j=h[0];j.interval&&clearInterval(j.interval);j.defaultWidth&&h.width(j.defaultWidth);j.defaultHeight&&h.height(j.defaultHeight);var i=g.width(),d=h.height();j.defaultWidth=h.width();j.defaultHeight=h.height();var l=c.getLeft(m.left,i,h.width());var k=c.getTop(m.top,g.height(),d,c.xoffset);h.height(0);h.css({left:l+"px"});if(k>m.top){j.interval=JC.f.easyEffect(function(n,o){h.css({top:k-d-c.yoffset+"px",height:n+"px"});o&&f&&f(e)},d)}else{j.interval=JC.f.easyEffect(function(n,o){h.css({top:k-n-c.yoffset+"px",height:n+"px"});o&&f&&f(e)},d)}},onresize:function(d){if(!d.selector().is(":visible")){return}var g=d.selector(),e=g.data("popupSrc");if(!(e&&e.length)){d.center()}else{var h=e.offset();var m=h.top,p=e.height(),k=g.height(),o=0,f=h.left,i=e.width(),l=g.width(),j=0;var q=c.getLeft(f,i,l,j)+c.xoffset;var n=c.getTop(m,p,k,o)-k-c.yoffset;g.css({left:q+"px",top:n+"px"})}},getTop:function(i,g,d,f){var j=i,h=$(document).scrollTop(),e=$(window).height()-d;j-d<h&&(j=i+g+d+f);return j},getLeft:function(h,g,j,f){f==undefined&&(f=5);var i=h+g/2+f-j/2,e=$(document).scrollLeft(),d=$(window).width()+e-j;i>d&&(i=d-2);i<e&&(i=e+1);return i},fixWidth:function(g,f){var e=$('<div class="UPanel_TMP" style="position:absolute; left:-9999px;top:-9999px;">'+g+"</div>").appendTo("body"),d=e.width()+80;e.remove();d>c.maxWidth&&(d=c.maxWidth);d<c.minWidth&&(d=c.minWidth);f.selector().css("width",d)},getStatusClass:function(d){var e="UPanelSuccess";switch(d){case 0:e="UPanelSuccess";break;case 1:e="UPanelError";break;case 2:e="UPanelAlert";break}return e},tpls:{msgbox:['<div class="UPanel UPanelPopup {status}" >','    <div class="UPContent">','        <div class="bd">',"            <dl>",'                <dd class="UPopupContent">','                <button class="UIcon" align="absMiddle" ></button><div class="UText"><button type="button" class="UPlaceholder"></button>{msg}</div>',"                </dd>","            </dl>","        </div>","    </div><!--end UPContent-->","</div>"].join(""),alert:['<div class="UPanel UPanelPopup {status}" >','    <div class="UPContent">','        <div class="bd">',"            <dl>",'                <dd class="UPopupContent">','                <button class="UIcon" align="absMiddle" ></button><div class="UText"><button type="button" class="UPlaceholder"></button>{msg}</div>',"                </dd>",'                <dd class="UButton">','                    <button type="button" class="UPanel_confirm" eventtype="confirm">确定</button>',"                </dd>","            </dl>","        </div>","    </div><!--end UPContent-->","</div>"].join(""),confirm:['<div class="UPanel UPanelPopup {status}" >','    <div class="UPContent">','        <div class="bd">',"            <dl>",'                <dd class="UPopupContent">','                <button class="UIcon" align="absMiddle" ></button><div class="UText"><button type="button" class="UPlaceholder"></button>{msg}</div>',"                </dd>",'                <dd class="UButton">','                    <button type="button" class="UPanel_confirm" eventtype="confirm">确定</button>','                    <button type="button" class="UPanel_cancel" eventtype="cancel">取消</button>',"                </dd>","            </dl>","        </div>","    </div><!--end UPContent-->","</div>"].join("")}};$(window).on("resize",function(d){$("body > div.UPanelPopup_identifer").each(function(){var e=$(this);e.data("PopupInstance")&&c.onresize(e.data("PopupInstance"))})});return JC.Panel})}(typeof define==="function"&&define.amd?define:function(b,a,c){typeof b=="function"&&(c=b);typeof a=="function"&&(c=a);c&&c()},window));(function(b,a){b(["JC.Panel.default"],function(){var e=!!window.ActiveXObject&&!window.XMLHttpRequest;var c=window.Dialog=JC.Dialog=function(f,i,j,h){if(d.timeout){clearTimeout(d.timeout)}if(JC.Panel.getInstance(f)){d.timeout=setTimeout(function(){JC.Panel.getInstance(f).show(0)},d.showMs);return JC.Panel.getInstance(f)}d.dialogIdentifier();var g=new JC.Panel(f,i,j,h);d.dialogIdentifier(g);d.showMask();g.selector().css("z-index",window.ZINDEX_COUNT++);!g.selector().is("[panelclickclose]")&&g.selector().attr("panelclickclose",false);g.on("close_default",function(k,l){d.hideMask()});g.on("hide_default",function(k,l){d.hideMask()});g.on("show_default",function(k,l){d.showMask();setTimeout(function(){d.showMask();g.selector().css({"z-index":window.ZINDEX_COUNT++,display:"block"})},1)});d.timeout=setTimeout(function(){g.show(0)},d.showMs);return g};JC.Dialog.mask=function(f){!f&&d.showMask();f&&d.hideMask()};var d={timeout:null,showMs:10,dialogIdentifier:function(f){if(!f){d.hideMask();$("body > div.UPanelDialog_identifer").each(function(){var g=$(this),h=Panel.getInstance(g);if(!h){return}h.hide();h.close()});$("body > div.UPanel_TMP").remove()}else{f.selector().addClass("UPanelDialog_identifer");f.selector().data("DialogInstance",f)}},showMask:function(){var g=$("#UPanelMask"),f=$("#UPanelMaskIfrmae");if(!g.length){$(d.tpls.mask).appendTo("body");g=$("#UPanelMask"),f=$("#UPanelMaskIfrmae")}f.show();g.show();d.setMaskSizeForIe6();f.css("z-index",window.ZINDEX_COUNT++);g.css("z-index",window.ZINDEX_COUNT++)},hideMask:function(){var g=$("#UPanelMask"),f=$("#UPanelMaskIfrmae");if(g.length){g.hide()}if(f.length){f.hide()}},setMaskSizeForIe6:function(){var h=$("#UPanelMask"),g=$("#UPanelMaskIfrmae");if(!(h.length&&g.length)){return}var f={position:"absolute",top:"0px",left:$(document).scrollLeft()+"px",height:$(document).height()+"px",width:$(window).width()+"px"};h.css(f);g.css(f)},tpls:{mask:['<div id="UPanelMask" class="UPanelMask"></div>','<iframe src="about:blank" id="UPanelMaskIfrmae"',' frameborder="0" class="UPanelMaskIframe"></iframe>'].join("")}};$(window).on("resize scroll",function(f){$("body > div.UPanelDialog_identifer").each(function(){var g=$(this);if(g.data("DialogInstance")){if(!g.data("DialogInstance").selector().is(":visible")){return}if(f.type.toLowerCase()=="resize"){g.data("DialogInstance").center()}d.setMaskSizeForIe6()}})});return JC.Dialog})}(typeof define==="function"&&define.amd?define:function(b,a,c){typeof b=="function"&&(c=b);typeof a=="function"&&(c=a);c&&c()},window));(function(b,a){b(["JC.Dialog"],function(){JC.Dialog.msgbox=function(i,h,g,f){if(!i){return}var e=(JC.Dialog.msgbox.tpl||c.tpls.msgbox).replace(/\{msg\}/g,i).replace(/\{status\}/g,c.getStatusClass(h||""));var d=JC.Dialog(e);c.fixWidth(i,d);g&&d.on("close",g);setTimeout(function(){d.autoClose(f)},1);return d};JC.Dialog.msgbox.tpl;JC.Dialog.alert=function(h,g,f){if(!h){return}var e=(JC.Dialog.alert.tpl||c.tpls.alert).replace(/\{msg\}/g,h).replace(/\{status\}/g,c.getStatusClass(g||""));var d=JC.Dialog(e);c.fixWidth(h,d);f&&d.on("confirm",f);return d};JC.Dialog.alert.tpl;JC.Dialog.confirm=function(i,h,g,d){if(!i){return}var f=(JC.Dialog.confirm.tpl||c.tpls.confirm).replace(/\{msg\}/g,i).replace(/\{status\}/g,c.getStatusClass(h||""));var e=JC.Dialog(f);c.fixWidth(i,e);g&&e.on("confirm",g);d&&e.on("cancel",d);return e};JC.Dialog.confirm.tpl;var c={minWidth:180,maxWidth:500,getStatusClass:function(d){var e="UPanelSuccess";switch(d){case 0:e="UPanelSuccess";break;case 1:e="UPanelError";break;case 2:e="UPanelAlert";break}return e},fixWidth:function(g,f){var e=$('<div class="UPanel_TMP" style="position:absolute; left:-9999px;top:-9999px;">'+g+"</div>").appendTo("body"),d=e.width()+80;d>c.maxWidth&&(d=c.maxWidth);d<c.minWidth&&(d=c.minWidth);f.selector().css("width",d)},tpls:{msgbox:['<div class="UPanel UPanelPopup {status}" panelclickclose="true" >','    <div class="UPContent">','        <div class="bd">',"            <dl>",'                <dd class="UPopupContent">','                <button class="UIcon" align="absMiddle" ></button><div class="UText"><button type="button" class="UPlaceholder"></button>{msg}</div>',"                </dd>","            </dl>","        </div>","    </div><!--end UPContent-->","</div>"].join(""),alert:['<div class="UPanel UPanelPopup {status}" panelclickclose="true" >','    <div class="UPContent">','        <div class="bd">',"            <dl>",'                <dd class="UPopupContent">','                <button class="UIcon" align="absMiddle" ></button><div class="UText"><button type="button" class="UPlaceholder"></button>{msg}</div>',"                </dd>",'                <dd class="UButton">','                    <button type="button" class="UPanel_confirm" eventtype="confirm">确定</button>',"                </dd>","            </dl>","        </div>","    </div><!--end UPContent-->","</div>"].join(""),confirm:['<div class="UPanel UPanelPopup {status}" panelclickclose="true" >','    <div class="UPContent">','        <div class="bd">',"            <dl>",'                <dd class="UPopupContent">','                <button class="UIcon" align="absMiddle" ></button><div class="UText"><button type="button" class="UPlaceholder"></button>{msg}</div>',"                </dd>",'                <dd class="UButton">','                    <button type="button" class="UPanel_confirm" eventtype="confirm">确定</button>','                    <button type="button" class="UPanel_cancel" eventtype="cancel">取消</button>',"                </dd>","            </dl>","        </div>","    </div><!--end UPContent-->","</div>"].join("")}};return JC.Dialog})}(typeof define==="function"&&define.amd?define:function(b,a,c){typeof b=="function"&&(c=b);typeof a=="function"&&(c=a);c&&c()},window));