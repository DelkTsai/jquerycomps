(function(b,a){b(["JC.common"],function(){(function(e){window.JC=window.JC||{log:function(){}};window.Tips=JC.Tips=f;function f(i){i=e(i);if(!(i&&i.length)){return this}if(i.length>1){return f.init(i)}if(f.getInstance(i)){return f.getInstance(i)}f.getInstance(i,this);this._model=new h(i);this._view=new g(this._model);this._init()}f.prototype={_init:function(){var i=this;e(this._view).on("BindEvent",function(j,l,k){i.on(l,k)});e(this._view).on("TriggerEvent",function(j,l,k){i.trigger(l,k)});this._view.init();this._model.selector().on("mouseenter",c);return this},show:function(i){this._view.show(i);return this},hide:function(){this._view.hide();return this},selector:function(){return this._model.selector()},layout:function(i){return this._view.layout(i)},data:function(){return this._model.data()},on:function(j,i){e(this).on(j,i);return this},trigger:function(j,i){e(this).trigger(j,i);return this}};f.init=function(i){if(!i){return}i=e(i);if(!i.length){return}var j=[];i.each(function(){var k=e(this);if(f.getInstance(k)){return}j.push(new f(k))});return j};f.hide=function(){e("body > div.UTips").hide()};f.autoInit=true;f.tpl=null;f.offset={bottom:{x:15,y:15},left:{x:-28,y:5},top:{x:-2,y:-22}};f.minWidth=200;f.maxWidth=400;f.titleToTipsdata=function(i){i=e(i);if(!JC.Tips.autoInit||(typeof window.event=="object"&&document.attachEvent)){i.each(function(){e(this).attr("tipsData",e(this).attr("title")).removeAttr("title")})}};f.getInstance=function(i,j){j&&i&&e(i).data("TipsIns",j);return i?e(i).data("TipsIns"):null};function h(i){this.tpl=d;this._selector=i;this._data;this._init()}h.prototype={_init:function(){this.update();return this},data:function(i){i&&this.update();return this._data},update:function(){if(!(this._selector.attr("title")||this._selector.attr("tipsData"))){return}this._data=e.trim(this._selector.attr("title")||this._selector.attr("tipsData")).replace(/(?:\r\n|\n\r|\r|\n)/g,"<br />");this._selector.removeAttr("title").removeAttr("tipsData");if(this.isInited()){return}this.isInited(true)},isInited:function(i){typeof i!="undefined"&&(this._selector.data("initedTips",i));return this._selector.data("initedTips")},selector:function(){return this._selector},tipsinitedcallback:function(){var i;this._selector.attr("tipsinitedcallback")&&(i=window[this._selector.attr("tipsinitedcallback")]);return i},tipsshowcallback:function(){var i;this._selector.attr("tipsshowcallback")&&(i=window[this._selector.attr("tipsshowcallback")]);return i},tipshidecallback:function(){var i;this._selector.attr("tipshidecallback")&&(i=window[this._selector.attr("tipshidecallback")]);return i},tipstemplatebox:function(){var i;this._selector.is("[tipstemplatebox]")&&(i=e(this._selector.attr("tipstemplatebox")).html().trim().replace(/[\r\n]+/g,""));this._selector.is("[tipstemplatesbox]")&&(i=e(this._selector.attr("tipstemplatesbox")).html().trim().replace(/[\r\n]+/g,""));return i},tipstemplatesbox:function(){return this.tipstemplatebox()},tipsupdateonce:function(){var i;this._selector.attr("tipsupdateonce")&&(i=JC.f.parseBool(this._selector.attr("tipsupdateonce")));return i},tipsIsUpdated:function(i){typeof i!="undefined"&&this._selector.data("TipsUpdated",i);return this._selector.data("TipsUpdated")},layout:function(){if(!this._layout){if(this.tipstemplatesbox()){this._layout=e(this.tipstemplatesbox());this._layout.appendTo(document.body)}else{this._layout=e("#JCTipsLayout");if(!(this._layout&&this._layout.length)){this._layout=e(this.tipstemplatesbox()||JC.Tips.tpl||this.tpl);this._layout.attr("id","JCTipsLayout").css("position","absolute");this._layout.appendTo(document.body)}}}return this._layout}};function g(i){this._model=i;this._layout}g.prototype={init:function(){e(this).trigger("BindEvent",["TipsShow",this._model.tipsshowcallback()]);e(this).trigger("BindEvent",["TipsHide",this._model.tipshidecallback()]);e(this).trigger("BindEvent",["TipsInited",this._model.tipsinitedcallback()]);return this},show:function(k){var s=k.pageX,r=k.pageY;s+=JC.Tips.offset.bottom.x;r+=JC.Tips.offset.bottom.y;var p=e(document).scrollTop(),o=e(document).scrollLeft();var l=e(window).width(),n=e(window).height();var t=this.layout().width(),q=this.layout().height();var v=o+l-t,i=o;var u=p+n-q,w=p;var m=false,j=false;s>v&&(s=s-t+JC.Tips.offset.left.x,r+=JC.Tips.offset.left.y,m=true);s<i&&(s=i);r>u&&(r=r-q+JC.Tips.offset.top.y,s+=JC.Tips.offset.top.x,j=true);r<w&&(r=w);m&&j&&(r-=5);this.layout().css({left:s+"px",top:r+"px"});this.layout().show();e(this).trigger("TriggerEvent",["TipsShow",this._model.tipsshowcallback()])},hide:function(){this.layout().hide();e(this).trigger("TriggerEvent","TipsHide")},layout:function(i){this._layout=this._model.layout();i&&this.update();return this._layout},update:function(){if(this._model.tipsupdateonce()&&this._model.tipsIsUpdated()){return}var j=this._model.data(1);this._layout.html(j).css({width:"auto",left:"-9999px",top:"-9999px",display:"block"});var i=this._layout.width(),k=this._layout.height();i<JC.Tips.minWidth&&this._layout.css("width",JC.Tips.minWidth+"px");i>JC.Tips.maxWidth&&this._layout.css("width",JC.Tips.maxWidth+"px");this._model.tipsIsUpdated(true)}};function c(l){var k=e(this),j=f.getInstance(k);j.layout(1).css("z-index",ZINDEX_COUNT++);if(!j.data()){return}j.show(l);e(document).on("mousemove",i);k.on("mouseleave",m);function i(n){if(!j.layout().is(":visible")){e(document).unbind("mousemove",i);e(k).unbind("mouseleave",m);return}j.show(n)}function m(n){e(document).unbind("mousemove",i);e(k).unbind("mouseleave",m);j.hide()}}var d='<div class="UTips"></div>';e(document).ready(function(i){setTimeout(function(){if(!JC.Tips.autoInit){return}f.titleToTipsdata(e("[title]"));e(document).delegate("*","mouseover",function(k){var j=e(this);if(f.getInstance(j)){return}if(!(j.attr("title")||j.attr("tipsData"))){return}JC.Tips.init(j);c.call(this,k)})},10)})}(jQuery));return JC.Tips})}(typeof define==="function"&&define.amd?define:function(b,a,c){typeof b=="function"&&(c=b);typeof a=="function"&&(c=a);c&&c()},window));