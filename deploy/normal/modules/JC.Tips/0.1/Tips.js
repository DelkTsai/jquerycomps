(function(e,t){e(["JC.common"],function(){return function(e){function t(i){i=e(i);if(!i||!i.length)return this;if(i.length>1)return t.init(i);if(t.getInstance(i))return t.getInstance(i);t.getInstance(i,this),this._model=new n(i),this._view=new r(this._model),this._init()}function n(e){this.tpl=s,this._selector=e,this._data,this._init()}function r(e){this._model=e,this._layout}function i(n){function s(t){if(!i.layout().is(":visible")){e(document).unbind("mousemove",s),e(r).unbind("mouseleave",o);return}i.show(t)}function o(t){e(document).unbind("mousemove",s),e(r).unbind("mouseleave",o),i.hide()}var r=e(this),i=t.getInstance(r);i.layout(1).css("z-index",ZINDEX_COUNT++);if(!i.data())return;i.show(n),e(document).on("mousemove",s),r.on("mouseleave",o)}window.JC=window.JC||{log:function(){}},window.Tips=JC.Tips=t,t.prototype={_init:function(){var t=this;return e(this._view).on("BindEvent",function(e,n,r){t.on(n,r)}),e(this._view).on("TriggerEvent",function(e,n,r){t.trigger(n,r)}),this._view.init(),this._model.selector().on("mouseenter",i),this},show:function(e){return this._view.show(e),this},hide:function(){return this._view.hide(),this},selector:function(){return this._model.selector()},layout:function(e){return this._view.layout(e)},data:function(){return this._model.data()},on:function(t,n){return e(this).on(t,n),this},trigger:function(t,n){return e(this).trigger(t,n),this}},t.init=function(n){if(!n)return;n=e(n);if(!n.length)return;var r=[];return n.each(function(){var n=e(this);if(t.getInstance(n))return;r.push(new t(n))}),r},t.hide=function(){e("body > div.UTips").hide()},t.autoInit=!0,t.tpl=null,t.offset={bottom:{x:15,y:15},left:{x:-28,y:5},top:{x:-2,y:-22}},t.minWidth=200,t.maxWidth=400,t.titleToTipsdata=function(t){t=e(t),(!JC.Tips.autoInit||typeof window.event=="object"&&document.attachEvent)&&t.each(function(){e(this).attr("tipsData",e(this).attr("title")).removeAttr("title")})},t.getInstance=function(t,n){return n&&t&&e(t).data("TipsIns",n),t?e(t).data("TipsIns"):null},n.prototype={_init:function(){return this.update(),this},data:function(e){return e&&this.update(),this._data},update:function(){if(!this._selector.attr("title")&&!this._selector.attr("tipsData"))return;this._data=e.trim(this._selector.attr("title")||this._selector.attr("tipsData")).replace(/(?:\r\n|\n\r|\r|\n)/g,"<br />"),this._selector.removeAttr("title").removeAttr("tipsData");if(this.isInited())return;this.isInited(!0)},isInited:function(e){return typeof e!="undefined"&&this._selector.data("initedTips",e),this._selector.data("initedTips")},selector:function(){return this._selector},tipsinitedcallback:function(){var e;return this._selector.attr("tipsinitedcallback")&&(e=window[this._selector.attr("tipsinitedcallback")]),e},tipsshowcallback:function(){var e;return this._selector.attr("tipsshowcallback")&&(e=window[this._selector.attr("tipsshowcallback")]),e},tipshidecallback:function(){var e;return this._selector.attr("tipshidecallback")&&(e=window[this._selector.attr("tipshidecallback")]),e},tipstemplatebox:function(){var t;return this._selector.is("[tipstemplatebox]")&&(t=e(this._selector.attr("tipstemplatebox")).html().trim().replace(/[\r\n]+/g,"")),this._selector.is("[tipstemplatesbox]")&&(t=e(this._selector.attr("tipstemplatesbox")).html().trim().replace(/[\r\n]+/g,"")),t},tipstemplatesbox:function(){return this.tipstemplatebox()},tipsupdateonce:function(){var e;return this._selector.attr("tipsupdateonce")&&(e=JC.f.parseBool(this._selector.attr("tipsupdateonce"))),e},tipsIsUpdated:function(e){return typeof e!="undefined"&&this._selector.data("TipsUpdated",e),this._selector.data("TipsUpdated")},layout:function(){if(!this._layout)if(this.tipstemplatesbox())this._layout=e(this.tipstemplatesbox()),this._layout.appendTo(document.body);else{this._layout=e("#JCTipsLayout");if(!this._layout||!this._layout.length)this._layout=e(this.tipstemplatesbox()||JC.Tips.tpl||this.tpl),this._layout.attr("id","JCTipsLayout").css("position","absolute"),this._layout.appendTo(document.body)}return this._layout}},r.prototype={init:function(){return e(this).trigger("BindEvent",["TipsShow",this._model.tipsshowcallback()]),e(this).trigger("BindEvent",["TipsHide",this._model.tipshidecallback()]),e(this).trigger("BindEvent",["TipsInited",this._model.tipsinitedcallback()]),this},show:function(t){var n=t.pageX,r=t.pageY;n+=JC.Tips.offset.bottom.x,r+=JC.Tips.offset.bottom.y;var i=e(document).scrollTop(),s=e(document).scrollLeft(),o=e(window).width(),u=e(window).height(),a=this.layout().width(),f=this.layout().height(),l=s+o-a,c=s,h=i+u-f,p=i,d=!1,v=!1;n>l&&(n=n-a+JC.Tips.offset.left.x,r+=JC.Tips.offset.left.y,d=!0),n<c&&(n=c),r>h&&(r=r-f+JC.Tips.offset.top.y,n+=JC.Tips.offset.top.x,v=!0),r<p&&(r=p),d&&v&&(r-=5),this.layout().css({left:n+"px",top:r+"px"}),this.layout().show(),e(this).trigger("TriggerEvent",["TipsShow",this._model.tipsshowcallback()])},hide:function(){this.layout().hide(),e(this).trigger("TriggerEvent","TipsHide")},layout:function(e){return this._layout=this._model.layout(),e&&this.update(),this._layout},update:function(){if(this._model.tipsupdateonce()&&this._model.tipsIsUpdated())return;var e=this._model.data(1);this._layout.html(e).css({width:"auto",left:"-9999px",top:"-9999px",display:"block"});var t=this._layout.width(),n=this._layout.height();t<JC.Tips.minWidth&&this._layout.css("width",JC.Tips.minWidth+"px"),t>JC.Tips.maxWidth&&this._layout.css("width",JC.Tips.maxWidth+"px"),this._model.tipsIsUpdated(!0)}};var s='<div class="UTips"></div>';e(document).ready(function(n){setTimeout(function(){if(!JC.Tips.autoInit)return;t.titleToTipsdata(e("[title]")),e(document).delegate("*","mouseover",function(n){var r=e(this);if(t.getInstance(r))return;if(!r.attr("title")&&!r.attr("tipsData"))return;JC.Tips.init(r),i.call(this,n)})},10)})}(jQuery),JC.Tips})})(typeof define=="function"&&define.amd?define:function(e,t,n){typeof e=="function"&&(n=e),typeof t=="function"&&(n=t),n&&n()},window);