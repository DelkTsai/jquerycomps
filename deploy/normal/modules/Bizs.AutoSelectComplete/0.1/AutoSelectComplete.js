(function(e,t){e(["JC.BaseMVC","JC.AutoComplete","JC.AutoSelect"],function(){return function(e){function t(n){n&&(n=e(n));if(t.getInstance(n))return t.getInstance(n);t.getInstance(n,this),this._model=new t.Model(n),this._view=new t.View(this._model),this._init(),JC.log("AutoSelectComplete inited",(new Date).getTime())}window.Bizs=window.Bizs||{},Bizs.AutoSelectComplete=t,t.getInstance=function(n,r){typeof n=="string"&&!/</.test(n)&&(n=e(n));if(!n||!n.length||typeof n=="string")return;return typeof r!="undefined"&&n.data(t.Model._instanceName,r),n.data(t.Model._instanceName)},t.init=function(n){var r=[];return n=e(n||document),n&&n.length&&(n.hasClass(".js_bizAutoSelectComplete")?r.push(new t(n)):n.find("input.js_bizAutoSelectComplete").each(function(){r.push(new t(this))})),r},t.prototype={_beforeInit:function(){JC.log("AutoSelectComplete _beforeInit",(new Date).getTime())},_initHanlderEvent:function(){var t=this;t.on("BASC_SELECT_CHANGED",function(e,n){JC.log("Bizs.AutoSelectComplete all changed",(new Date).getTime()),t.trigger("BASC_ALL_CHANGE",[n]);var r=n.val(),n,r,i;r?JC.AutoComplete.ajaxUpdate(t._model.selector(),JC.f.printf(t._model.bascAjaxUrl(),r),function(e){t.trigger("BASC_CHANGE",[n,r,e]);var i=this;if(t._model.firstUpdate()){t._model.firstUpdate(!1),t.trigger("BASC_FIRST_UPDATE",[e,i]);return}t.trigger("BASC_CLEAR")}):(t.trigger("BASC_CLEAR"),t.trigger("BASC_CHANGE",[n]))}),t.on("BASC_CLEAR",function(){var e=JC.AutoComplete.getInstance(t._model.selector());if(!e)return;e.clear()}),t.on("BASC_ALL_CHANGE",function(e,n){var r=JC.AutoComplete.getInstance(t._model.selector());n.is(":visible")&&n.val()?r?t._model.selector().show():t._model.selector().hide():t._model.selector().hide()}),t.on("BASC_CHANGE",function(e,n,r,i){JC.log("BASC_CHANGE",(new Date).getTime(),r,i);var s=JC.AutoComplete.getInstance(t._model.selector());r&&i&&i.length?t._model.selector().show():(t._model.selector().hide(),JC.log("hide"))}),t.on("BASC_FIRST_UPDATE",function(t,n,r){var i=r.idVal();if(!i)return;e.each(n,function(e,t){if(t.id==i)return r.selector().val(t.label),!1})})},_inited:function(){JC.log("AutoSelectComplete _inited",(new Date).getTime()),this._model.selector().attr("cacDataFilter",t.Model.DATA_FILTER_NAME),this._model.injectDefaultSelectCallback()}},BaseMVC.buildModel(t),t.Model._instanceName="AutoSelectComplete",t.Model.INS_COUNT=1,t.Model.DATA_FILTER_NAME="BizsAutoSelectCompleteDataFilter",t.Model.prototype={init:function(){JC.log("AutoSelectComplete.Model.init:",(new Date).getTime()),this._insCount=t.Model.INS_COUNT++,this._firstUpdate=!0},firstUpdate:function(e){return typeof e!="undefined"&&(this._firstUpdate=e),this._firstUpdate},insCount:function(){return this._insCount},bascDefaultSelect:function(){var e=this.selectorProp("bascDefaultSelect");return e},injectDefaultSelectCallback:function(){var t=this,n=t.callbackProp(t.bascDefaultSelect(),"selectallchanged"),r="AutoSelectComplete_inject_"+t.insCount();if(t.bascDefaultSelect().attr("selectallchanged")==r)return;window[r]=function(r){n&&n.apply(this,JC.f.sliceArgs(arguments)),e(t).trigger("TriggerEvent",["BASC_SELECT_CHANGED",r[r.length-1]])},t.bascDefaultSelect().attr("selectallchanged",r)},bascAjaxUrl:function(){var e=this.attrProp("bascAjaxUrl");return e},bascDefaultLabel:function(){var e=this.attrProp("bascDefaultLabel");return e},bascDefaultId:function(){var e=this.attrProp("bascDefaultId");return e}},BaseMVC.buildView(t),t.View.prototype={init:function(){JC.log("AutoSelectComplete.View.init:",(new Date).getTime())}},BaseMVC.build(t,"Bizs"),window[t.Model.DATA_FILTER_NAME]=function(t){return t.data&&t.data.length&&(t=t.data),e.each(t,function(e,n){n.length&&(t[e]={id:n[0],label:n[1]})}),t},e(document).ready(function(){var e=0;t.autoInit&&(e=t.init())})}(jQuery),Bizs.AutoSelectComplete})})(typeof define=="function"&&define.amd?define:function(e,t){t&&t()},this);