(function(e,t){e(["JC.BaseMVC"],function(){return function(e){function t(n){n&&(n=e(n));if(t.getInstance(n))return t.getInstance(n);t.getInstance(n,this),this._model=new t.Model(n),this._view=new t.View(this._model),this._init(),JC.log("MoneyTips inited",(new Date).getTime())}window.Bizs=window.Bizs||{},Bizs.MoneyTips=t,t.getInstance=function(n,r){typeof n=="string"&&!/</.test(n)&&(n=e(n));if(!n||!n.length||typeof n=="string")return;return typeof r!="undefined"&&n.data(t.Model._instanceName,r),n.data(t.Model._instanceName)},t.init=function(n){var r=[];return n=e(n||document),n&&n.length&&(n.hasClass(".js_bizMoneyTips")?r.push(new t(n)):n.find("input.js_bizMoneyTips").each(function(){r.push(new t(e(this)))})),r},t.prototype={_beforeInit:function(){},_initHanlderEvent:function(){var e=this;e._model.selector().on("focus blur ",function(t){JC.log("focus or blur",(new Date).getTime()),e.trigger("BMTUpdate",[e._model.selector().val().trim()])}),e._model.selector().bind("input propertychange",function(t){JC.log("input or propertychange",(new Date).getTime()),e.trigger("BMTUpdate",[e._model.selector().val().trim()])}),e.on("BMTUpdate",function(t,n){var r=n,n=JC.f.parseFinance(r),i;if(isNaN(n)||!n){e._view.update();return}i=JC.f.moneyFormat(r),e._view.update(i)})},_inited:function(){var e=this;e.trigger("BMTUpdate",[e._model.selector().val().trim()])},update:function(e){return this.trigger("BMTUpdate",[e||""]),this}},BaseMVC.buildModel(t),t.Model._instanceName="MoneyTips",t.Model.prototype={init:function(){},bmtDisplayLabel:function(){this._bmtDisplayLabel=this._bmtDisplayLabel||this.selectorProp("bmtDisplayLabel");if(!this._bmtDisplayLabel||!this._bmtDisplayLabel.length)this._bmtDisplayLabel=e('<span class="js_bmtSpan"></span>'),this.selector().after(this._bmtDisplayLabel);return this._bmtDisplayLabel},bmtPattern:function(){var e=this.attrProp("bmtPattern")||"{0}";return e}},BaseMVC.buildView(t),t.View.prototype={init:function(){},show:function(){this._model.bmtDisplayLabel().show()},hide:function(){this._model.bmtDisplayLabel().hide()},update:function(e){var t=this;e?(t._model.bmtDisplayLabel().html(JC.f.printf(t._model.bmtPattern(),e)),t.show()):t.hide()}},BaseMVC.build(t,"Bizs"),e(document).ready(function(){var e=0;t.autoInit&&(e=t.init())}),e(document).delegate("input.js_bizMoneyTips","focus click",function(n){!t.getInstance(e(this))&&new t(e(this))})}(jQuery),Bizs.MoneyTips})})(typeof define=="function"&&define.amd?define:function(e,t){t&&t()},this);