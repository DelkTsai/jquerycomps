(function(e,t){e(["JC.BaseMVC"],function(){function e(t){t&&(t=$(t));if(JC.BaseMVC.getInstance(t,e))return JC.BaseMVC.getInstance(t,e);JC.BaseMVC.getInstance(t,e,this),this._model=new e.Model(t),this._view=new e.View(this._model),this._init()}Bizs.InputSelect=e,e.init=function(t){var n=[];return t=$(t||document),t.length&&(t.hasClass("js_bizInputSelect")?n.push(new e(t)):t.find(".js_bizInputSelect").each(function(){n.push(new e(this))})),n},BaseMVC.build(e),JC.f.extendObject(e.prototype,{_beforeInit:function(){var e=this;e._model.selector().addClass("IPTSEL-BOX").append('<span class="IPTSEL-ARROW"></span>')},_initHanlderEvent:function(){var e=this;e._model.selector().data("visible",0),e._model.iptselipt().on("click",function(){if(!e.selector().data("visible"))return;e._hide()}),e._model.iptselarrow().on("click",function(t){t.stopPropagation(),e._model.dataurl()&&!e._model.dataready&&e._model.ajaxdata(),e[e._model.selector().data("visible")?"_hide":"_show"]()}),e._model.iptselbox().delegate(e._model.iptseloption()[0],"click",function(t){var n=$(t.target||t.srcElement);e._model.iptselipt().val(n.data("label")),e._model.iptselhideipt().val(n.data("value")),e._hide(),JC.f.safeTimeout(function(){e._model.iptselipt().trigger("blur")},null,"IptSelItemClick",200)}),e._model.iptselbox().on("mousedown",function(e){e.stopPropagation()}),$(document).on("mousedown",function(){e._hide()})},_inited:function(){},_show:function(){var e=this;return e._view.show(),e._model.selector().data("visible",1),this},_hide:function(){var e=this;return e._view.hide(),e._model.selector().data("visible",0),this}}),e.Model._instanceName="InputSelectIns",JC.f.extendObject(e.Model.prototype,{init:function(){},iptselipt:function(){return JC.f.parentSelector(this.selector(),this.attrProp("iptselipt")).addClass("IPTSEL-INPUT")},iptselhideipt:function(){return JC.f.parentSelector(this.selector(),this.attrProp("iptselhideipt")).addClass("IPTSEL-HIDE")},iptselarrow:function(){return this.selector().find(".IPTSEL-ARROW")},iptseloption:function(){var e=this.selector();return JC.f.parentSelector(e,this.attrProp("iptseloption")).addClass("IPTSEL-ITEM")},iptselbox:function(){var e=this,t=e.attrProp("iptseldatabox");return JC.f.parentSelector(e.selector(),t).addClass("IPTSEL-DROPDOWN")},iptselprevententer:function(){var e,t=this.selector();return t.is("[iptselprevententer]")&&(_r=JC.f.parseBool(t.attr("iptselprevententer"))),_r},dataurl:function(){return this.attrProp("iptseldataurl")},ajaxdata:function(){var e=this,t=this.dataurl();$.get(t).done(function(t){t=$.parseJSON(t);var n="<ul>",r=0,i;if(t.errorno)JC.f.alert("操作失败",2);else{i=t.data.length;if(i===0)n="<li>暂无数据</li>";else for(r=0;r<i;r++)n+='<li data-label="'+t.data[r].label+'" class="IPTSEL-ITEM">'+t.data[r].label+"</li>";n+="</ul>",e.iptselbox().html(n),e.dataready=1}})},dataready:0}),JC.f.extendObject(e.View.prototype,{init:function(){},show:function(){var e=this;e._model.iptselbox().show()},hide:function(){var e=this;e._model.iptselbox().hide()}});var t=$(document);return t.ready(function(){var t=0;e.autoInit&&(t=e.init())}),Bizs.InputSelect})})(typeof define=="function"&&define.amd?define:function(e,t,n){typeof e=="function"&&(n=e),typeof t=="function"&&(n=t),n&&n()},window);