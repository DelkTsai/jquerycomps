(function(b,a){b(["JC.BaseMVC"],function(){Bizs.MoneyTips=c;function c(d){d&&(d=$(d));if(c.getInstance(d)){return c.getInstance(d)}c.getInstance(d,this);this._model=new c.Model(d);this._view=new c.View(this._model);this._init();JC.log("MoneyTips inited",new Date().getTime())}c.getInstance=function(d,e){if(typeof d=="string"&&!/</.test(d)){d=$(d)}if(!(d&&d.length)||(typeof d=="string")){return}typeof e!="undefined"&&d.data(c.Model._instanceName,e);return d.data(c.Model._instanceName)};c.init=function(d){var e=[];d=$(d||document);if(d&&d.length){if(d.hasClass(".js_bizMoneyTips")){e.push(new c(d))}else{d.find("input.js_bizMoneyTips").each(function(){e.push(new c($(this)))})}}return e};c.format=function(d,e){d&&(d=$(d));e&&(e=$(e));if(!(d&&d.length)){return}d.each(function(){var f=$(this),h,g=JC.f.parentSelector(f,f.attr("bmtFormatOutput"));!(g&&g.length)&&(g=f);e&&e.length&&(g=e);!(g&&g.length)&&(g=f);if("value" in this){h=f.val().trim()}else{h=f.html().trim()}if("value" in g[0]){g.val(JC.f.moneyFormat(h))}else{g.html(JC.f.moneyFormat(h))}});return d};c.prototype={_beforeInit:function(){},_initHanlderEvent:function(){var d=this;d._model.selector().on("focus blur ",function(e){JC.log("focus or blur",new Date().getTime());d.trigger("BMTUpdate",[d._model.selector().val().trim()])});d._model.selector().bind("input propertychange",function(e){JC.log("input or propertychange",new Date().getTime());d.trigger("BMTUpdate",[d._model.selector().val().trim()])});d.on("BMTUpdate",function(f,h){var g=h,h=JC.f.parseFinance(g),e;if(isNaN(h)||!h){d._view.update();return}e=JC.f.moneyFormat(g);d._view.update(e)})},_inited:function(){var d=this;d.trigger("BMTUpdate",[d._model.selector().val().trim()])},update:function(d){this.trigger("BMTUpdate",[d||""]);return this}};BaseMVC.buildModel(c);c.Model._instanceName="MoneyTips";c.Model.prototype={init:function(){},bmtDisplayLabel:function(){this._bmtDisplayLabel=this._bmtDisplayLabel||this.selectorProp("bmtDisplayLabel");if(!(this._bmtDisplayLabel&&this._bmtDisplayLabel.length)){this._bmtDisplayLabel=$('<span class="js_bmtSpan"></span>');this.selector().after(this._bmtDisplayLabel)}return this._bmtDisplayLabel},bmtPattern:function(){var d=this.attrProp("bmtPattern")||"{0}";return d}};BaseMVC.buildView(c);c.View.prototype={init:function(){},show:function(){this._model.bmtDisplayLabel().show()},hide:function(){this._model.bmtDisplayLabel().hide()},update:function(e){var d=this;if(!e){d.hide()}else{d._model.bmtDisplayLabel().html(JC.f.printf(d._model.bmtPattern(),e));d.show()}}};BaseMVC.build(c,"Bizs");$(document).ready(function(){var d=0;c.autoInit&&(d=c.init())&&c.format($("span.js_bmtLabel, label.js_bmtLabel"))});$(document).delegate("input.js_bizMoneyTips","focus click",function(d){!c.getInstance($(this))&&new c($(this))});return Bizs.MoneyTips})}(typeof define==="function"&&define.amd?define:function(b,a,c){typeof b=="function"&&(c=b);typeof a=="function"&&(c=a);c&&c()},window));