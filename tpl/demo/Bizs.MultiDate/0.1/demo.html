<!doctype html>
<html>
    <head>
    <meta charset="utf-8" />
        <title>JC.AjaxTree simple demo</title>
        <!-- start pageCommon style -->
        <link rel="stylesheet" type="text/css" href="../../../../static/css/common.css" />
        <link rel="stylesheet" type="text/css" href="../../../../static/css/app/simple.css" />
        <!-- end pageCommon style -->

        <!-- start codeview style -->
        <link rel="stylesheet" type="text/css" href="../../../../static/js/codeMirror/lib/codemirror.css" />
        <link rel="stylesheet" type="text/css" href="../../../../static/css/app/codeview/neo.css" />
        <!-- end codeview style -->

        <!-- start JC style -->
        <link href='../../../../static/js/jc/modules/JC.AjaxTree/0.1/res/default/style.css' rel='stylesheet' />
        <!-- end JC style -->

        <!-- start customer style ( add class 'show-css' will show in css block ) -->
        <style class="show-css">
            
            /* include JC.AjaxTree style.css */

        </style>
        <!-- end customer style -->

        <style>
            .ajaxtree-demo1 {
                margin-left: 50px;
            }
        </style>
        
        <script src="../../../../static/js/jc/lib.js"></script>
        <script src="../../../../static/js/config.js"></script>
        <script src="../../../../static/js/app/demo.js"></script>

    </head>
    <body>
        <div class="codeview-wrap">
            <div class="codeview-tabbar">
                <a href="#" class="codeview-css">CSS</a>
                <a href="#" class="codeview-js">JS</a>
                <a href="#" class="codeview-html">HTML</a>
                <a href="#" class="codeview-page selected">PAGE</a>
            </div>
            <div class="codeview-view cm-s-neo">
                <div class="codeview-cssview">
                    <textArea style="display:none;"></textArea>
                </div>
                <div class="codeview-jsview">
                    <textArea style="display:none;"></textArea>
                </div>
                <div class="codeview-htmlview">
                    <textArea style="display:none;"></textArea>
                </div>
                <div class="codeview-pageview nowview">
                <div style="position:fixed; right: 30px; top: 40px;">
                    <dl>
                        <dd>
                        <a style="margin-right: 10px; color: #ccc;" href="?">init Tree</a>
                        <button type="button" class="js_open_all">open all</button>
                        <button type="button" class="js_close_all">close all</button>
                        <button type="button" class="js_open_for" data_target="#open_to_val">open for</button>
                        <input type="text" value="0101" id="open_to_val" style="width: 60px;" />
                        <button type="button" class="js_close_for" data_target="#open_to_val">close for</button>
                        </dd>
                    </dl>
                </div>
                <div class="show-html">
                    <!-- simple demo -->
                    <dl class="ajaxtree-demo1">
                        <dt>默认树 - Tree 示例</dt>
                        <dd>
                            <!-- class="js_compAjaxTree" is necessary -->
                            <div class="js_compAjaxTree" data-cajScriptData="|script">
                                <script type="text/template">
                                    {
                                        data:  {
                                            "0": [
                                                    ["folder","01","非异步节点01"],
                                                    ["folder","02","非异步节点02"],
                                                    ["folder","03","异步节点"],
                                                    ["file","04","叶末节点"]
                                                ],
                                            "01": [
                                                    ["folder","0101","folder0101"],
                                                    ["file","0102","file0102"],
                                                    ["file","0103","file0103"]
                                                ],
                                            "02": [
                                                    ["file","0201","file0201"],
                                                    ["file","0202","file0202"]
                                                ],
                                            "0101": [
                                                    ["file","010101","file010101"],
                                                    ["file","010102","file010102"]
                                                ]

                                        }
                                        , root: ["folder","0",'root']
                                        , url: "data/treedata.php"
                                    }
                                </script>
                            </div>
                        </dd>
                    </dl>
                </div>
                </div>
            </div>
        </div>

        <script type="text/javascript" class="show-js">

            /* include JC.AjaxTree.js */

            var ajaxTree;

            /* open all */
            $( document ).delegate('button.js_open_all', 'click', function(){
                $('div.js_compAjaxTree').each( function( _k ){
                    ajaxTree = JC.BaseMVC.getInstance( this, JC.AjaxTree ); 
                    ajaxTree && ajaxTree.open();
                });
            });

            /* close all */
            $( document ).delegate('button.js_close_all', 'click', function(){
                $('div.js_compAjaxTree').each( function(){
                    ajaxTree = JC.BaseMVC.getInstance( this, JC.AjaxTree );
                    ajaxTree && ajaxTree.close();
                });
            });

            /* open node */
            $( document ).delegate('button.js_open_for', 'click', function(){
            
                var _tgr = $(this).attr('data_target');
                if( !_tgr ) return;
                _tgr = $.trim( $( _tgr ).val() );

                $('div.js_compAjaxTree').each( function(){
                    ajaxTree = JC.BaseMVC.getInstance( this, JC.AjaxTree );
                    ajaxTree && ajaxTree.open( _tgr );
                });
            });

            /* close node */
            $( document ).delegate('button.js_close_for', 'click', function(){
            
                var _tgr = $(this).attr('data_target');
                if( !_tgr ) return;
                _tgr = $.trim( $( _tgr ).val() );

                $('div.js_compAjaxTree').each( function(){
                    ajaxTree = JC.BaseMVC.getInstance( this, JC.AjaxTree );
                    ajaxTree && ajaxTree.close( _tgr );
                });
            });

        </script>
    </body>
</html>

