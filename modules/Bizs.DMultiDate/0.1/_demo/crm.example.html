<!doctype html>
<html>
    <head>
        <meta charset=utf-8 />
        <title>360 75 team</title>
        <style type='text/css'>
            *{ margin: 0; padding: 0; }
            body{ width: 600px; margin: 20px auto 20px; background:#ececec; }
            dl dd{ margin: 10px 0; }
            .js_multidateBox{ display: none;}
        </style>
        <link href='../../../../modules/JC.Valid/0.2/res/default/style.css' rel='stylesheet' />
        <link href='../../../../modules/JC.Tips/0.1/res/default/style.css' rel='stylesheet' />
        <link href='../../../../modules/JC.Calendar/0.2/res/default/style.css' rel='stylesheet' />
        <script src="../../../../lib.js"></script>
        <script src="../../../../config.js"></script>
        <script>
            JC.debug = true; 

            requirejs( [ 'JC.Tips', 'JC.Calendar', 'JC.Form', 'Bizs.DMultiDate', 'Bizs.FormLogic', 'JC.Valid' ]
            , function( Tips, Calendar, JCForm, DMultiDate, FormLogic ){
                var _maxDate = new Date();
                _maxDate.setDate( _maxDate.getDate() - 1 );
                $('input.js_multidate').attr( 'maxvalue', JC.f.formatISODate( _maxDate ) );

                window.Bizs && Bizs.MultiDate && ( Bizs.MultiDate.maxDate = _maxDate );
            }
            );

// /// 针对周的日期格式化
//     //
//     function parseWeekDate( _dateStr ){
//         _dateStr = $.trim( _dateStr || '' );
//         var _r = { start: null, end: null }, _normalDate;

//         if( _dateStr ){
//             _normalDate = _dateStr.replace( /[^\d]+/g, '' );
//             _dateStr = _dateStr.split( 'W' );

//             if( _normalDate.length === 8 ){
//                 _r.start = JC.f.parseISODate( _normalDate );
//                 _r.end = _r.start;
//                 return _r;
//             }else if( _normalDate.length === 16 ){
//                 _r.start = JC.f.parseISODate( _normalDate.slice( 0, 8 ) );
//                 _r.end = JC.f.parseISODate( _normalDate.slice( 8, 16 ) );
//                 return _r;
//             }

//             var _year, _week, _sdate, _edate, _weeks, _date

//             _year = parseInt( _dateStr[0], 10 );
//             _week = parseInt( _dateStr[1], 10 );
//             _sdate = JC.f.pureDate( new Date( _dateStr[0] ), 0, 1 );
//             _edate = JC.f.pureDate( new Date( _dateStr[1] ), 0, 1 );
//             _weeks = _weeks || JC.f.weekOfYear( _dateStr[0], JC.Calendar.weekDayOffset );

//             $( _weeks ).each( function( _ix, _item ){
//                 if( _item.week === _week ){
//                     _r.start = new Date();
//                     _r.end = new Date();

//                     _r.start.setTime( _item.start );
//                     _r.end.setTime( _item.end );
//                     return false;
//                 }
//             });
//         }

//         return _r;
//     }
//     //
//     /// 针对月份日期格式化 YY-MM
//     //
//     function parseMonthDate( _dateStr ){
//         _dateStr = $.trim( _dateStr || '' );
//         var _r = { start: null, end: null }, _normalDate;

//         if( _dateStr ){
//             _normalDate = _dateStr.replace( /[^\d]+/g, '' );
//             _dateStr = _dateStr.replace( /[^\d]+/g, '' );

//             if( _normalDate.length === 8 ){
//                 _r.start = JC.f.parseISODate( _normalDate );
//                 _r.end = _r.start;
//                 return _r;
//             }else if( _normalDate.length === 16 ){
//                 _r.start = JC.f.parseISODate( _normalDate.slice( 0, 8 ) );
//                 _r.end = JC.f.parseISODate( _normalDate.slice( 8, 16 ) );
//                 return _r;
//             }

//             var _year = _dateStr.slice( 0, 4 ), _month = parseInt( _dateStr.slice( 4, 6 ), 10 ) - 1;

//             _r.start = new Date( _year, _month, 1 );
//         }

//          return _r;
//     }
//     //
//     /// 针对季度日期格式化 YY-MM ~ YY-MM
//     //
//     function parseSeasonDate( _dateStr ){
//         _dateStr = $.trim( _dateStr || '' );
//         var _r = { start: null, end: null }, _normalDate;

//         if( _dateStr ){
//             _normalDate = _dateStr.replace( /[^\d]+/g, '' );
//             _dateStr = _dateStr.split( 'Q' );

//             if( _normalDate.length === 8 ){
//                 _r.start = JC.f.parseISODate( _normalDate );
//                 _r.end = _r.start;
//                 return _r;
//             }else if( _normalDate.length === 16 ){
//                 _r.start = JC.f.parseISODate( _normalDate.slice( 0, 8 ) );
//                 _r.end = JC.f.parseISODate( _normalDate.slice( 8, 16 ) );
//                 return _r;
//             }

//             var _year = parseInt( _dateStr[0], 10 ), _season = parseInt( _dateStr[1], 10 )
//                 , _sdate = JC.f.pureDate( new Date( _dateStr[0] ), 0, 1 )
//                 , _edate = JC.f.pureDate( new Date( _dateStr[1] ), 0, 1 )
//                 , _seasons = JC.f.seasonOfYear( _dateStr[0] )
//                 ;

//             $( _seasons ).each( function( _ix, _item ){
//                 if( _item.season === _season ){
//                     _r.start = new Date();
//                     _r.end = new Date();

//                     _r.start.setTime( _item.start );
//                     _r.end.setTime( _item.end );
//                     return false;
//                 }
//             });
//         }

//         return _r;
//     }
//     //
//     /// 针对月份日期格式化 YY-MM
//     //
//     function parseYearDate( _dateStr ){
//         _dateStr = $.trim( _dateStr || '' );
//         var _r = { start: null, end: null }, _year;

//         if( _dateStr ){
//             _normalDate = _dateStr.replace( /[^\d]+/g, '' );
//             _dateStr = _dateStr.replace( /[^\d]+/g, '' );

//             if( _normalDate.length === 8 ){
//                 _r.start = JC.f.parseISODate( _normalDate );
//                 _r.end = _r.start;
//                 return _r;
//             }else if( _normalDate.length === 16 ){
//                 _r.start = JC.f.parseISODate( _normalDate.slice( 0, 8 ) );
//                 _r.end = JC.f.parseISODate( _normalDate.slice( 8, 16 ) );
//                 return _r;
//             }

//             _year = _dateStr.slice( 0, 4 );
//             _r.start = new Date( _year, 0, 1 );
//         }

//         return _r;
//     }




        </script>
    </head>    
    <body>
        <br /><br /><br /><br /><br /><br />
        <form action='' method='get' class="js_autoFillUrlForm">
            <dl>
                <dt>JC.Calendar  CRM 示例</dt>
                <dd>
                <div class="js_autoDMultiDate" 
                    mddate="|input.js_multidate"
                    mdstartdate="|input.js_startdate"
                    mdenddate="|input.js_enddate"
                    mddayrange="31"
                    mdweekrange="4"
                    mdmonthrange="12"
                    mdseasonrange="8"
                    mdyearrange="2">
                    <select name="dataspan" class="dataspan">
                        <option value="day">日数据</option>
                        <option value="week">周数据</option>
                        <option value="month">月数据</option>
                        <option value="season">季数据</option>
                        <option value="year">年数据</option>
                    </select>
                    <input type="text" class="js_multidate" 
                        multidate="date"
                        datatype="daterange" 
                        currentcanselect="true" 
                        size="20" readonly=""
                        emel="/em">
                     <input type="text" class="js_multidate" 
                        multidate="date" 
                        datatype="daterange"
                        currentcanselect="true" 
                        size="20" readonly="" 
                        emel="/em">
                    <em></em>
                    <input type="hidden" name="startdate" class="js_startdate" value="" />
                    <input type="hidden" name="enddate" class="js_enddate" value="" />
                </div>

                <button type="submit">submit</button>
                <button type="reset" onclick="location.href='?'">reset</button>
                </dd>
            </dl>
        </form>
        <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
        <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />

    </body>
</html>

